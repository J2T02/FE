import { createContext, useContext, useState, useEffect } from "react";

const BookingContext = createContext();
export const useBooking = () => useContext(BookingContext);

export const BookingProvider = ({ children }) => {
  const [open, setOpen] = useState(false);
  const [showCustomerModal, setShowCustomerModal] = useState(false);
  const [doctor, setDoctor] = useState(null);
  const [doctors, setDoctors] = useState([]);
  const [services, setServices] = useState([]);
  const [blogs, setBlogs] = useState([]);

  // Load d·ªØ li·ªáu khi modal m·ªü
  useEffect(() => {
    loadDoctors();
    loadDoctors();
    loadServices();
    loadBlogs();
  }, []);
  // üß™ Mock: load b√°c sƒ©
  const loadDoctors = async () => {
    const mockDoctors = [
      {
        doctorId: 1,
        doctorName: "Nguy·ªÖn VƒÉn A",
        email: "bs.a@gmail.com",
        phone: "0909123456",
        star: 5,
        gender: 1,
        yob: "1990-06-01",
        img: "/anhcuong.jpg",
        experience: 4,
        startDate: "2021-06-01",
        status: 1,
        eduId: 1, // C·ª≠ nh√¢n
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 2,
        doctorName: "Tr·∫ßn Th·ªã B",
        email: "bs.b@gmail.com",
        phone: "0909123457",
        star: 4,
        gender: 2,
        yob: "1985-03-15",
        img: "/anhhuynh.png",
        experience: 10,
        startDate: "2013-04-10",
        status: 1,
        eduId: 2, // Th·∫°c sƒ©
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 3,
        doctorName: "L√™ VƒÉn C",
        email: "bs.c@gmail.com",
        phone: "0909123458",
        star: 3,
        gender: 1,
        yob: "1988-12-20",
        img: "/anhket.jpg",
        experience: 7,
        startDate: "2016-01-15",
        status: 2,
        eduId: 1, // C·ª≠ nh√¢n
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 4,
        doctorName: "Ph·∫°m Th·ªã D",
        email: "bs.d@gmail.com",
        phone: "0909123459",
        star: 5,
        gender: 2,
        yob: "1992-07-10",
        img: "/anhnhan.jpg",
        experience: 3,
        startDate: "2022-01-01",
        status: 1,
        eduId: 3, // Ti·∫øn sƒ©
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 5,
        doctorName: "ƒê·ªó VƒÉn E",
        email: "bs.e@gmail.com",
        phone: "0909123460",
        star: 4,
        gender: 1,
        yob: "1980-09-25",
        img: "/anhthinh.jpg",
        experience: 15,
        startDate: "2009-05-20",
        status: 3,
        eduId: 2, // Th·∫°c sƒ©
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 6,
        doctorName: "Ng√¥ Th·ªã F",
        email: "bs.f@gmail.com",
        phone: "0909123461",
        star: 4,
        gender: 2,
        yob: "1995-01-30",
        img: "/doctorhuy.jpg",
        experience: 2,
        startDate: "2023-03-10",
        status: 1,
        eduId: 1, // C·ª≠ nh√¢n
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 7,
        doctorName: "V√µ VƒÉn G",
        email: "bs.g@gmail.com",
        phone: "0909123462",
        star: 3,
        gender: 1,
        yob: "1987-11-11",
        img: "/femaledoctor.jpg",
        experience: 8,
        startDate: "2015-06-20",
        status: 1,
        eduId: 2, // Th·∫°c sƒ©
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 8,
        doctorName: "Hu·ª≥nh Th·ªã H",
        email: "bs.h@gmail.com",
        phone: "0909123463",
        star: 5,
        gender: 2,
        yob: "1991-04-05",
        img: "/khanhtuyensinh.jpg",
        experience: 5,
        startDate: "2019-09-01",
        status: 2,
        eduId: 3, // Ti·∫øn sƒ©
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 9,
        doctorName: "B√πi VƒÉn I",
        email: "bs.i@gmail.com",
        phone: "0909123464",
        star: 4,
        gender: 1,
        yob: "1983-08-08",
        img: "/maihadoctor.jpg",
        experience: 12,
        startDate: "2011-02-18",
        status: 1,
        eduId: 1, // C·ª≠ nh√¢n
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
      {
        doctorId: 10,
        doctorName: "T√¥ Th·ªã K",
        email: "bs.k@gmail.com",
        phone: "0909123465",
        star: 5,
        gender: 2,
        yob: "1989-10-10",
        img: "/quocanh.jpg",
        experience: 6,
        startDate: "2017-08-01",
        status: 3,
        eduId: 3, // Ti·∫øn sƒ©
        filePathEdu: "https://fap.fpt.edu.vn/",
      },
    ];
    setDoctors(mockDoctors);
  };
  //Mock: load Services
  const loadServices = async () => {
    const mockService = [
      {
        serId: 1,
        serName: "ƒêi·ªÅu tr·ªã th·ª• tinh trong ·ªëng nghi·ªám (IVF)",
        price: 30000000,
        description:
          "Ch√∫ng t√¥i cung c·∫•p d·ªãch v·ª• th·ª• tinh trong ·ªëng nghi·ªám (IVF) gi√∫p c√°c c·∫∑p v·ª£ ch·ªìng hi·∫øm mu·ªôn c√≥ c∆° h·ªôi tr·ªü th√†nh cha m·∫π. Quy tr√¨nh hi·ªán ƒë·∫°i, an to√†n v√† t·ª∑ l·ªá th√†nh c√¥ng cao.",
        filePath: "/IVF.jpg",
      },
      {
        serId: 2,
        serName:
          "Ch·ªØa hi·∫øm mu·ªôn b·∫±ng ph∆∞∆°ng ph√°p b∆°m tinh tr√πng v√†o t·ª≠ cung (IUI)",
        price: 15000000,
        description:
          "Ph∆∞∆°ng ph√°p b∆°m tinh tr√πng v√†o t·ª≠ cung (IUI) l√† m·ªôt trong nh·ªØng gi·∫£i ph√°p hi·ªáu qu·∫£ cho c√°c c·∫∑p v·ª£ ch·ªìng g·∫∑p v·∫•n ƒë·ªÅ v·ªÅ kh·∫£ nƒÉng th·ª• thai t·ª± nhi√™n. ƒê∆∞·ª£c th·ª±c hi·ªán b·ªüi c√°c chuy√™n gia gi√†u kinh nghi·ªám.",
        filePath: "/IVF.jpg",
      },
      {
        serId: 3,
        serName: "Ch·ªØa hi·∫øm mu·ªôn b·∫±ng ph·∫´u thu·∫≠t c·∫Øt ·ªëng d·∫´n tr·ª©ng t·∫Øc ngh·∫Ωn",
        price: 25000000,
        description:
          "Ch√∫ng t√¥i cung c·∫•p ph·∫´u thu·∫≠t ƒëi·ªÅu tr·ªã c√°c v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn ·ªëng d·∫´n tr·ª©ng t·∫Øc ngh·∫Ωn, gi√∫p tƒÉng kh·∫£ nƒÉng mang thai t·ª± nhi√™n cho ph·ª• n·ªØ b·ªã v√¥ sinh do v·∫•n ƒë·ªÅ n√†y.",
        filePath: "/IVF.jpg",
      },
    ];
    setServices(mockService);
  };

  const loadBlogs = async () => {
    const mockBlog = [
      {
        blogId: 1,
        authorId: 201,
        title: "D·∫•u hi·ªáu v√¥ sinh v√† khi n√†o c·∫ßn ƒëi kh√°m",
        img: "https://clinic.example.com/images/infertility-signs.jpg",
        content:
          "B√†i vi·∫øt gi√∫p b·∫°n nh·∫≠n di·ªán c√°c d·∫•u hi·ªáu ph·ªï bi·∫øn c·ªßa t√¨nh tr·∫°ng v√¥ sinh v√† th·ªùi ƒëi·ªÉm th√≠ch h·ª£p ƒë·ªÉ thƒÉm kh√°m s·ªõm.",
        postDate: "2025-06-01",
        isActive: true,
      },
      {
        blogId: 2,
        authorId: 202,
        title: "Quy tr√¨nh IVF: B∆∞·ªõc chu·∫©n b·ªã cho h√†nh tr√¨nh l√†m cha m·∫π",
        img: "https://clinic.example.com/images/ivf-prep.jpg",
        content:
          "H∆∞·ªõng d·∫´n t·ª´ng b∆∞·ªõc t·ª´ t∆∞ v·∫•n ban ƒë·∫ßu ƒë·∫øn khi b·∫Øt ƒë·∫ßu chu k·ª≥ IVF t·∫°i ph√≤ng kh√°m c·ªßa ch√∫ng t√¥i.",
        postDate: "2025-06-03",
        isActive: true,
      },
      {
        blogId: 3,
        authorId: 203,
        title: "Hi·ªÉu ƒë√∫ng v·ªÅ th·ª• tinh nh√¢n t·∫°o (IUI)",
        img: "https://clinic.example.com/images/iui-explained.jpg",
        content:
          "Th·ª• tinh nh√¢n t·∫°o l√† m·ªôt l·ª±a ch·ªçn ƒë∆°n gi·∫£n, ti·∫øt ki·ªám chi ph√≠. B√†i vi·∫øt gi·∫£i th√≠ch quy tr√¨nh v√† hi·ªáu qu·∫£ c·ªßa ph∆∞∆°ng ph√°p n√†y.",
        postDate: "2025-06-05",
        isActive: true,
      },
      {
        blogId: 4,
        authorId: 204,
        title: "Ch·∫ø ƒë·ªô dinh d∆∞·ª°ng h·ªó tr·ª£ kh·∫£ nƒÉng sinh s·∫£n",
        img: "https://clinic.example.com/images/fertility-nutrition.jpg",
        content:
          "C√πng kh√°m ph√° nh·ªØng th·ª±c ph·∫©m v√† th√≥i quen ƒÉn u·ªëng gi√∫p tƒÉng c∆∞·ªùng s·ª©c kh·ªèe sinh s·∫£n cho c·∫£ nam v√† n·ªØ.",
        postDate: "2025-06-07",
        isActive: true,
      },
      {
        blogId: 5,
        authorId: 201,
        title: "Y·∫øu t·ªë t√¢m l√Ω trong ƒëi·ªÅu tr·ªã hi·∫øm mu·ªôn",
        img: "https://clinic.example.com/images/emotional-support.jpg",
        content:
          "√Åp l·ª±c tinh th·∫ßn ·∫£nh h∆∞·ªüng l·ªõn ƒë·∫øn kh·∫£ nƒÉng th·ª• thai. Ch√∫ng t√¥i chia s·∫ª c√°c ph∆∞∆°ng ph√°p h·ªó tr·ª£ tinh th·∫ßn hi·ªáu qu·∫£.",
        postDate: "2025-06-10",
        isActive: true,
      },
      {
        blogId: 6,
        authorId: 202,
        title: "Nguy√™n nh√¢n v√¥ sinh th∆∞·ªùng g·∫∑p ·ªü nam gi·ªõi",
        img: "https://clinic.example.com/images/male-infertility.jpg",
        content:
          "B√†i vi·∫øt t·∫≠p trung ph√¢n t√≠ch c√°c nguy√™n nh√¢n d·∫´n ƒë·∫øn v√¥ sinh nam v√† c√°c x√©t nghi·ªám c·∫ßn thi·∫øt.",
        postDate: "2025-06-12",
        isActive: true,
      },
      {
        blogId: 7,
        authorId: 204,
        title: "Khi n√†o n√™n ch·ªçn tr·ªØ ƒë√¥ng tr·ª©ng?",
        img: "https://clinic.example.com/images/egg-freezing.jpg",
        content:
          "Tr·ªØ ƒë√¥ng tr·ª©ng l√† gi·∫£i ph√°p l√Ω t∆∞·ªüng cho ph·ª• n·ªØ hi·ªán ƒë·∫°i mu·ªën ch·ªß ƒë·ªông v·ªÅ th·ªùi gian sinh con.",
        postDate: "2025-06-14",
        isActive: true,
      },
      {
        blogId: 8,
        authorId: 203,
        title: "C√°c x√©t nghi·ªám c·∫ßn thi·∫øt tr∆∞·ªõc ƒëi·ªÅu tr·ªã hi·∫øm mu·ªôn",
        img: "https://clinic.example.com/images/fertility-tests.jpg",
        content:
          "T√¨m hi·ªÉu c√°c b∆∞·ªõc ki·ªÉm tra quan tr·ªçng tr∆∞·ªõc khi ti·∫øn h√†nh IVF ho·∫∑c IUI t·∫°i ph√≤ng kh√°m.",
        postDate: "2025-06-16",
        isActive: true,
      },
      {
        blogId: 9,
        authorId: 201,
        title: "C√¢u chuy·ªán th√†nh c√¥ng: B√© Ph√∫c v√† h√†nh tr√¨nh hy v·ªçng",
        img: "https://clinic.example.com/images/success-baby.jpg",
        content:
          "Chia s·∫ª ch√¢n th·ª±c t·ª´ ch·ªã H·∫°nh sau 5 nƒÉm ƒëi·ªÅu tr·ªã v√† h√†nh tr√¨nh h·∫°nh ph√∫c ƒë√≥n b√© Ph√∫c ch√†o ƒë·ªùi.",
        postDate: "2025-06-18",
        isActive: false,
      },
      {
        blogId: 10,
        authorId: 202,
        title: "T∆∞ th·∫ø quan h·ªá d·ªÖ th·ª• thai: S·ª± th·∫≠t hay huy·ªÅn tho·∫°i?",
        img: "https://clinic.example.com/images/positions-myth.jpg",
        content:
          "C√≥ th·ª±c s·ª± t∆∞ th·∫ø quan h·ªá ·∫£nh h∆∞·ªüng ƒë·∫øn kh·∫£ nƒÉng th·ª• thai? B√†i vi·∫øt ph√¢n t√≠ch theo g√≥c nh√¨n y khoa.",
        postDate: "2025-06-20",
        isActive: true,
      },
    ];
    setBlogs(mockBlog);
  };
  const handleCustomerSubmit = (customerData) => {
    // setUserInfo(customerData);
    // localStorage.setItem("userInfo", JSON.stringify(customerData));
    setShowCustomerModal(false);
  };
  return (
    <BookingContext.Provider
      value={{
        doctors,
        services,
        blogs,
      }}
    >
      {children}

      {/* {showCustomerModal && (
        <CustomerInfoModal
          open={showCustomerModal}
          accId={1} // ‚úÖ Truy·ªÅn accId
          onClose={() => setShowCustomerModal(false)}
          onCreated={handleCustomerSubmit}
        />
      )} */}
    </BookingContext.Provider>
  );
};
